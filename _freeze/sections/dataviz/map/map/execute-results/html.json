{
  "hash": "741a21960b6f93488b1d6384d11c1085",
  "result": {
    "markdown": "---\ntitle: \"Map making\"\nformat: \n  html:\n    code-fold: true\neditor: visual\n---\n\n\n\\[insert visual aid\\]\n\n## Overview of data\n\n### The Walkability Index:\n\n\"dataset characterizes every Census 2019 block group in the U.S. based on upon characteristics of the built environment that influence the likelihood of walking being used as a mode of travel.\\\n\n## Geography\n\n\"The **Grand Rapids -- Kentwood -- Muskegon Combined Statistical Area** is the 2nd largest [CSA](https://en.wikipedia.org/wiki/Combined_statistical_area \"Combined statistical area\") in the [U.S. state](https://en.wikipedia.org/wiki/U.S._state \"U.S. state\") of [Michigan](https://en.wikipedia.org/wiki/Michigan \"Michigan\") (behind [Metro Detroit](https://en.wikipedia.org/wiki/Metro_Detroit \"Metro Detroit\")). The CSA had a population of 1,320,064 at the 2010 census. The primary cultural and financial centers of the region are [Grand Rapids](https://en.wikipedia.org/wiki/Grand_Rapids,_Michigan \"Grand Rapids, Michigan\"), [Muskegon](https://en.wikipedia.org/wiki/Muskegon,_Michigan \"Muskegon, Michigan\") and [Holland](https://en.wikipedia.org/wiki/Holland,_Michigan \"Holland, Michigan\"). It includes the four counties in the Grand Rapids-Kentwood MSA plus one [metropolitan area](https://en.wikipedia.org/wiki/United_States_metropolitan_area), adding the Muskegon, MI MSA of [Muskegon County](https://en.wikipedia.org/wiki/Muskegon_County,_Michigan \"Muskegon County, Michigan\"), and two [micropolitan areas](https://en.wikipedia.org/wiki/United_States_micropolitan_area \"United States micropolitan area\") of Holland of [Allegan County](https://en.wikipedia.org/wiki/Allegan_County \"Allegan County\"), and Big Rapids of [Mecosta County](https://en.wikipedia.org/wiki/Mecosta_County \"Mecosta County\") for a total of seven counties.\n\nThe Grand Rapids metropolitan area is part of the [Great Lakes Megalopolis](https://en.wikipedia.org/wiki/Great_Lakes_Megalopolis \"Great Lakes Megalopolis\") containing an estimated 54 million people.\"\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#import cleaned data\n#Import cleaned data from SQL and Census\n# source(\"~/map/import_clean_merge.R\")\n\n# map areas\nmy_state <-  'MI'\nmy_county <-  c(\"Kent\", \"Ottawa\", \"Allegan\", \"Barry\", \"Eaton\", \"Oceana\", \n                \"Barry\", \"Muskegon\", \"Newaygo\", \"Ionia\", \"Montcalm\", \"Mecosta\",\n                \"Ingham\", \"Gratiot\", \"Clinton\", \"Isabella\")\n\nroads_data <-  primary_secondary_roads(my_state) %>% \n  filter(RTTYP %in% c('U','S','I')) #this will limit the roads to just highways. \n\nlandmass_data <-  counties(cb = TRUE, state = my_state) %>%\n  filter(NAME %in% my_county)\n\nwater_data <-  area_water(my_state, my_county)\n\n# Ensure the CRS for all objects are the same before performing spatial operations\nmap_area <-  st_crs(near_kent)\n\nroads_data <- st_transform(roads_data, map_area)\nlandmass_data <- st_transform(landmass_data, map_area)\nwater_data <- st_transform(water_data, map_area)\n\ngr_map <- ggplot() +\n  theme_void()  + #whiteout\n  # blank gray map\n  geom_sf(data = landmass_data, fill = '#e6e6e6', color = NA,aes(geometry = geometry))+\n  #add walkability scores\n  geom_sf(data = wlk_gr, color = NA, aes(geometry = geometry, fill = NatWalkInd))+\n  #add water\n  geom_sf(data = water_data, fill = '#cce6ff',color = NA, aes(geometry = geometry)) +\n  #add roads\n  geom_sf(data = roads_data, color = 'white', aes(geometry = geometry))\n\nwlk_gr <-  wlk_mi %>% \n  filter(CBSA_Name == \"Grand Rapids-Kentwood, MI\")\n# creates coordinates around the geographic area for a zoomed in map!\nlimits = st_bbox(wlk_gr$geometry)\nlimits\n\ngr_map = gr_map + \n  coord_sf(xlim = c(as.numeric(limits$xmin),as.numeric(limits$xmax)), \n           ylim = c(as.numeric(limits$ymin),as.numeric(limits$ymax))) +\n  labs(fill = 'Walkability Index',\n  title =  \"Walkability in the Greater Grand Rapids Area\",\n  caption = \"Source: 'The Walkability Index' | US Environmental Protection Agency\") + \n  # move legend to bottom left\n  theme(legend.justification = c(0,0), legend.position = c(0.1,0.1)) + \n  scale_fill_gradient(low = '#F1FCAE', high = '#184F50')\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](map_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n###### inspired by Matt Bartholomew's \"[Making a Better Map](https://bartholomatt.net/posts/census_maps_part2/), ggplot and Tigris\"\n",
    "supporting": [
      "map_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}